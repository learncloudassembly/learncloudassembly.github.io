<!doctype html><html lang=en-gb><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Custom Resources - Learn Cloud Assembly</title><meta name=description content="Part of VMware vRealize Automation"><meta name=generator content="Hugo 0.83.1"><link href=https://learncloudassembly.github.io/index.xml rel=alternate type=application/rss+xml><link rel=canonical href=https://learncloudassembly.github.io/Design/Custom_Resources/><link rel=stylesheet href=https://learncloudassembly.github.io/css/theme.css><link rel=stylesheet href=/css/lightbox.min.css><link rel=stylesheet href=/css/custom.css><script src=https://use.fontawesome.com/releases/v5.0.6/js/all.js></script><link rel=stylesheet href=https://learncloudassembly.github.io/css/chroma.min.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script><script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script src=https://learncloudassembly.github.io/js/bundle.js></script><script src=/js/lightbox.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-WTWNGD06LB"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-WTWNGD06LB')</script><style>:root{--custom-font-color:#0065ab;--custom-background-color:#FFFFFF}</style><meta property="og:title" content="Custom Resources"><meta property="og:description" content="Part of VMware vRealize Automation"><meta property="og:type" content="website"><meta property="og:url" content="https://learncloudassembly.github.io/Design/Custom_Resources/"><meta property="og:image" content="https://learncloudassembly.github.io/images/cloud-assembly.png"><meta property="og:site_name" content="Learn Cloud Assembly"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://learncloudassembly.github.io/images/cloud-assembly.png"><meta name=twitter:title content="Custom Resources"><meta name=twitter:description content="Part of VMware vRealize Automation"><meta itemprop=name content="Custom Resources"><meta itemprop=description content="Part of VMware vRealize Automation"></head><body><div class=container><header><div class=header-image><img src=/images/cloud-assembly.png alt="Learn Cloud Assembly"></div><div class=header><div class=header-h1><h1 class=header-h1>Learn Cloud Assembly</h1></div><div class=header-description><p class=description>Part of VMware vRealize Automation</p></div></div></header><div class=global-menu><nav><ul><li><a href=/>Home</a></li><li><a href=/Deployments>Deployment</a></li><li><a href=/Design>Design</a></li><li><a href=/Infrastructure>Infrastructure</a></li><li><a href=/Extensibility>Extensibility</a></li><li><a href=/Tenant-Management>Tenant Management</a></li><li><a href=/Marketplace>Marketplace</a></li><li><a href=/Alerts>Alerts</a></li></ul></nav></div><div class=content-container><main><h1>Custom Resources</h1><p>You can create custom resources, add them to the design canvas, and create <a href=/Design/Cloud_Templates/>cloud templates</a> that support your design and deployment needs.</p><p>Use <a href=https://www.vmware.com/products/vrealize-orchestrator.html target=_blank><i class="fa fa-external-link-alt fa-sm" aria-hidden=true></i> vRealize Orchestrator</a> to create custom resources</p><p>Each custom resource is based on a <a href=https://www.vmware.com/products/vrealize-orchestrator.html target=_blank><i class="fa fa-external-link-alt fa-sm" aria-hidden=true></i> vRealize Orchestrator</a> SDK inventory type and is created by a <a href=https://www.vmware.com/products/vrealize-orchestrator.html target=_blank><i class="fa fa-external-link-alt fa-sm" aria-hidden=true></i> vRealize Orchestrator</a> workflow that has an output which is an instance of your desired SDK type. Primitive types, such as Properties, Date, string, and number are not supported for the creation of custom resources.</p><p><strong>Building Custom Resources</strong></p><p>In order to build Custom Resources we will first need to build or identify a <a href=https://www.vmware.com/products/vrealize-orchestrator.html target=_blank><i class="fa fa-external-link-alt fa-sm" aria-hidden=true></i> vRealize Orchestrator</a> workflow for our use case. You will need to have at least two <a href=https://www.vmware.com/products/vrealize-orchestrator.html target=_blank><i class="fa fa-external-link-alt fa-sm" aria-hidden=true></i> vRealize Orchestrator</a> Workflows identified, one for the creation of the resource and one to destroy the resource when the <a href=/Deployments/>deployment</a> is deleted. In this blog we will build out a simple use case of creating a vCenter Folder along with the machine <a href=/Deployments/>deployment
</a>.</p><p>The <a href=https://www.vmware.com/products/vrealize-orchestrator.html target=_blank><i class="fa fa-external-link-alt fa-sm" aria-hidden=true></i> vRealize Orchestrator</a> Workflow we will use in this example is called “Create Virtual Machine Folder” and the workflow to destroy the folder when the deployment is deleted is called “Delete Virtual Machine Folder”. Both of these are built in <a href=https://www.vmware.com/products/vrealize-orchestrator.html target=_blank><i class="fa fa-external-link-alt fa-sm" aria-hidden=true></i> vRealize Orchestrator</a> Workflows.</p><div class=clr-content-image-wrap><a href=/Design/Custom_Resources/customresourcecreatefolderwf.png data-lightbox=page-images data-title="Custom Resource Create Folder"><img width=750 height=500 src=/Design/Custom_Resources/customresourcecreatefolderwf.png alt="Custom Resource Create Folder"></a><figcaption class=clr-caption>Custom Resource Create Folder</figcaption></div><div class=clr-content-image-wrap><a href=/Design/Custom_Resources/customresourcedeletefolderwf-768x133.png data-lightbox=page-images data-title="Custom Resource Delete Folder"><img width=750 height=500 src=/Design/Custom_Resources/customresourcedeletefolderwf-768x133.png alt="Custom Resource Delete Folder"></a><figcaption class=clr-caption>Custom Resource Delete Folder</figcaption></div><p>Notice that the “Create Virtual Machine Folder” has an Output for type VC:VmFolder, and the delete workflow has an Input for <i>VC:VmFolder</i>. This is needed in the event of a delete action.</p><p>Once we have identified the vRO workflow, we can then use that workflow in our Custom Resource object within <a href=https://www.vmware.com/products/vrealize-automation.html target=_blank><i class="fa fa-external-link-alt fa-sm" aria-hidden=true></i> vRealize Automation</a> Cloud Assembly. Within Cloud Assembly you will see a <a href=/Design/>Design</a> tab at the top, this is where you will configure <a href=/Design/Cloud_Templates/>cloud templates</a> and custom resources. Click on Custom Resources and then New Custom Resource. Fill out the form with the following information:</p><p><b>Name</b> – provide a name of the resource</p><p><b>Description</b> – optional description</p><p><b>Resource Type</b> – enter a name you want to give the resource, this will show up in the YAML code property – type. For example I entered Custom.CreateFolder.</p><p><b>Activate</b> – choose this if you want the resource to be available now</p><p><b>Scope</b> – define which projects can consume this resource, if you want all projects to see this resource then just leave it to the default.</p><p>After configuring the items above, you can then add the workflows you want to use under the <b>LifeCycle Actions</b> section. There are three types of actions you can configure – <i>Create</i>, <i>Update</i> and <i>Destroy</i>. The only two that are required are Create and Destroy. Notice that when you choose the “Create” workflow the system will auto-populate the External Type for you, in this case it found <i>VC:VmFolder</i>. This is an update we recently made to the product. This External Type is important in order for Update and Delete workflows to know what to do when they are triggered.</p><blockquote class="gdoc-hint info">Note: For vRealize Automation 8.0 and 8.1 customers, you will need to type or enter in the External Type manually. Make sure you choose the appropriate external type from the vRO Workflow. There should be a corresponding output and input between Create and Destroy workflows.</blockquote><div class=clr-content-image-wrap><a href=/Design/Custom_Resources/mainsetuppage.png data-lightbox=page-images data-title="Main Set up Page"><img width=750 height=500 src=/Design/Custom_Resources/mainsetuppage.png alt="Main Set up Page"></a><figcaption class=clr-caption>Main Set up Page</figcaption></div><p>Another change that was recently made was putting the schema properties onto a Properties page. The schema elements are what get translated onto the <a href=/Design/Cloud_Templates/>cloud templates</a> for configuration once the Custom Resource is dragged onto the <a href=/Design/Cloud_Templates/>cloud templates</a> canvas.</p><div class=clr-content-image-wrap><a href=/Design/Custom_Resources/propertiesschemepage.png data-lightbox=page-images data-title="Properties Scheme"><img width=750 height=500 src=/Design/Custom_Resources/propertiesschemepage.png alt="Properties Scheme"></a><figcaption class=clr-caption>Properties Scheme</figcaption></div><p>Once you create the Custom Resource it will show up in the <a href=/Design/Cloud_Templates/>cloud templates</a> as a Resource Type on the left hand side.<blockquote class="gdoc-hint info">Note: If you modified the scope of the Custom Resource to a certain Project, then the Custom Resource will only show up if this <a href=/Design/Cloud_Templates/>cloud templates</a> is also tied to the same Project.</blockquote></p><div class=clr-content-image-wrap><a href=/Design/Custom_Resources/customresourceblueprintcanvas-1024x550.png data-lightbox=page-images data-title="Custom Resource Design Canvas"><img width=750 height=500 src=/Design/Custom_Resources/customresourceblueprintcanvas-1024x550.png alt="Custom Resource Design Canvas"></a><figcaption class=clr-caption>Custom Resource Design Canvas</figcaption></div><p>Once you drag the Custom Resource onto the canvas then the <a href=/Design/Cloud_Templates/>cloud templates</a> YAML code will reflect the object. In this example I have already filled out the needed input bindings and path to the proper <a href=https://www.vmware.com/products/vrealize-orchestrator.html target=_blank><i class="fa fa-external-link-alt fa-sm" aria-hidden=true></i> vRealize Orchestrator</a> inventory section for <i>VC:Folders</i>. With this workflow we have both an Input for the folder name (type: string) and an object to query the parent folder (type: object). When you want to query via type:object then you will need to list out the relevant <a href=https://www.vmware.com/products/vrealize-orchestrator.html target=_blank><i class="fa fa-external-link-alt fa-sm" aria-hidden=true></i> vRealize Orchestrator</a> inventory path, in this case it is <i>$data: ‘vro/data/inventory/VC:VmFolder’</i>.</p><div class=clr-content-image-wrap><a href=/Design/Custom_Resources/customresourceyamlfolder.png data-lightbox=page-images data-title="Custom Resource YAML Construct"><img width=750 height=500 src=/Design/Custom_Resources/customresourceyamlfolder.png alt="Custom Resource YAML Construct"></a><figcaption class=clr-caption>Custom Resource YAML Construct</figcaption></div><p>You can now deploy the <a href=/Design/Cloud_Templates/>cloud templates</a> from Cloud Assembly or Service Broker.. Once deployed you can see some information about the Custom Resource in the <a href=/Deployments/>deployment
</a>screen.</p><div class=clr-content-image-wrap><a href=/Design/Custom_Resources/customresourcedeployed.png data-lightbox=page-images data-title="Custom Resource Deployed"><img width=750 height=500 src=/Design/Custom_Resources/customresourcedeployed.png alt="Custom Resource Deployed"></a><figcaption class=clr-caption>Custom Resource Deployed</figcaption></div><p>You can also add Day-2 Action workflows to the Custom Resource. From the Custom Resource page go to the bottom of the page and you will see Additional Actions section.</p><div class=clr-content-image-wrap><a href=/Design/Custom_Resources/addtionalactionssetup-768x138.png data-lightbox=page-images data-title="Additional Actions"><img width=750 height=500 src=/Design/Custom_Resources/addtionalactionssetup-768x138.png alt="Additional Actions"></a><figcaption class=clr-caption>Additional Actions</figcaption></div><p>These actions will present themselves in the Action dropdown when you select the custom resource from the Deployment Topology.</p><div class=clr-content-image-wrap><a href=/Design/Custom_Resources/renameactionforfolder-768x347.png data-lightbox=page-images data-title="Rename Action Folder"><img width=750 height=500 src=/Design/Custom_Resources/renameactionforfolder-768x347.png alt="Rename Action Folder"></a><figcaption class=clr-caption>Rename Action Folder</figcaption></div><div class=edit-meta>Last updated on 2 Jul 2021<br><a href=https://github.com/cmbu-tmm-sites/learncloudassembly/edit/main/content/Design/Custom_Resources/_index.md class=edit-page><i class="fas fa-pen-square"></i>&nbsp;Edit on GitHub</a></div><nav class=pagination><a class="nav nav-prev" href=https://learncloudassembly.github.io/Design/Property_Groups/ title="Property Groups"><i class="fas fa-arrow-left" aria-hidden=true></i>&nbsp;Prev - Property Groups</a>
<a class="nav nav-next" href=https://learncloudassembly.github.io/Design/Resource_Actions/ title="Resource Actions">Next - Resource Actions <i class="fas fa-arrow-right" aria-hidden=true></i></a></nav><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme adapted from <a href=https://github.com/thingsym/hugo-theme-techdoc>Thingsym</a>.</p></footer></main><div class=sidebar><nav class=slide-menu><ul><li><a href=https://learncloudassembly.github.io>Home</a></li><li class=has-sub-menu><a href=https://learncloudassembly.github.io/Deployments/>Deployments<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learncloudassembly.github.io/Deployments/Deployments/>Deployments</a></li><li><a href=https://learncloudassembly.github.io/Deployments/Resources/>Resources</a></li></ul></li><li class="parent has-sub-menu"><a href=https://learncloudassembly.github.io/Design/>Design<span class="mark opened">-</span></a><ul class=sub-menu><li><a href=https://learncloudassembly.github.io/Design/Cloud_Templates/>Cloud Templates</a></li><li><a href=https://learncloudassembly.github.io/Design/Property_Groups/>Property Groups</a></li><li class="parent active"><a href=https://learncloudassembly.github.io/Design/Custom_Resources/>Custom Resources</a></li><li><a href=https://learncloudassembly.github.io/Design/Resource_Actions/>Resource Actions</a></li></ul></li><li class=has-sub-menu><a href=https://learncloudassembly.github.io/Infrastructure/>Infrastructure<span class="mark closed">+</span></a><ul class=sub-menu><li class=has-sub-menu><a href=https://learncloudassembly.github.io/Infrastructure/Administration/>Administration<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learncloudassembly.github.io/Infrastructure/Administration/Projects/>Projects</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Administration/Users-and-Groups/>Users and Groups</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Administration/Custom-Roles/>Custom Roles</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Administration/Secrets/>Secrets</a></li></ul></li><li class=has-sub-menu><a href=https://learncloudassembly.github.io/Infrastructure/Configure/>Configure<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learncloudassembly.github.io/Infrastructure/Configure/Cloud-Zones/>Cloud Zones</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Configure/Virtual-Private-Zones/>Virtual Private Zones</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Configure/Kubernetes-Zones/>Kubernetes Zones</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Configure/Flavor-Mappings/>Flavor Mappings</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Configure/Image-Mappings/>Image Mappings</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Configure/Network-Profiles/>Network Profiles</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Configure/Storage-Profiles/>Storage Profiles</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Configure/Pricing-Cards/>Pricing Cards</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Configure/Terraform-Versions/>Terraform Versions</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Configure/Tags/>Tags</a></li></ul></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Onboarding/>Onboarding</a></li><li class=has-sub-menu><a href=https://learncloudassembly.github.io/Infrastructure/Resources/>Resources<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learncloudassembly.github.io/Infrastructure/Resources/Compute/>Compute</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Resources/Networks/>Networks</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Resources/Security/>Security</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Resources/Storage/>Storage</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Resources/Machines/>Machines</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Resources/Volumes/>Volumes</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Resources/Kubernetes/>Kubernetes</a></li></ul></li><li class=has-sub-menu><a href=https://learncloudassembly.github.io/Infrastructure/Activity/>Activity<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learncloudassembly.github.io/Infrastructure/Activity/Requests/>Requests</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Activity/Events-Log/>Events Log</a></li></ul></li><li class=has-sub-menu><a href=https://learncloudassembly.github.io/Infrastructure/Connections/>Connections<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learncloudassembly.github.io/Infrastructure/Connections/Cloud-Accounts/>Cloud Accounts</a></li><li><a href=https://learncloudassembly.github.io/Infrastructure/Connections/Integrations/>Integrations</a></li></ul></li></ul></li><li class=has-sub-menu><a href=https://learncloudassembly.github.io/Extensibility/>Extensibility<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learncloudassembly.github.io/Extensibility/Events/>Events</a></li><li><a href=https://learncloudassembly.github.io/Extensibility/Subscriptions/>Subscriptions</a></li><li class=has-sub-menu><a href=https://learncloudassembly.github.io/Extensibility/Library/>Library<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learncloudassembly.github.io/Extensibility/Library/Event-Topics/>Event Topics</a></li><li><a href=https://learncloudassembly.github.io/Extensibility/Library/Actions/>Actions</a></li><li><a href=https://learncloudassembly.github.io/Extensibility/Library/Workflows/>Workflows</a></li></ul></li><li class=has-sub-menu><a href=https://learncloudassembly.github.io/Extensibility/Activity/>Activity<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learncloudassembly.github.io/Extensibility/Activity/Action-Runs/>Action Runs</a></li><li><a href=https://learncloudassembly.github.io/Extensibility/Activity/Workflow-Runs/>Workflows Runs</a></li></ul></li></ul></li><li class=has-sub-menu><a href=https://learncloudassembly.github.io/Tenant-Management/>Tenant Management<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learncloudassembly.github.io/Tenant-Management/Tenants/>Tenants</a></li><li><a href=https://learncloudassembly.github.io/Tenant-Management/Image-Mappings/>Image Mappings</a></li><li><a href=https://learncloudassembly.github.io/Tenant-Management/Flavor-Mappings/>Flavor Mappings</a></li></ul></li><li class=has-sub-menu><a href=https://learncloudassembly.github.io/Marketplace/>Marketplace<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learncloudassembly.github.io/Marketplace/Cloud-Templates/>Cloud Templates</a></li><li><a href=https://learncloudassembly.github.io/Marketplace/Images/>Images</a></li><li><a href=https://learncloudassembly.github.io/Marketplace/Downloads/>Downloads</a></li></ul></li><li><a href=https://learncloudassembly.github.io/Alerts/>Alerts</a></li></ul></nav><div class=sidebar-footer></div></div></div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20><span class="fa-layers fa-fw"><i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i></span></a></div></body></html>